{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport { useReducer, useEffect, useRef, useCallback } from 'react';\nimport { SORT_ASC, SORT_DESC } from '../reducer/admin/resource/list/queryReducer';\n\nvar sortReducer = function sortReducer(state, action) {\n  switch (action.type) {\n    case 'SET_SORT':\n      return action.payload.sort;\n\n    case 'SET_SORT_FIELD':\n      {\n        var field = action.payload.field;\n        var order = state.field === field ? state.order === SORT_ASC ? SORT_DESC : SORT_ASC : SORT_ASC;\n        return {\n          field: field,\n          order: order\n        };\n      }\n\n    case 'SET_SORT_ORDER':\n      {\n        var order = action.payload.order;\n        return __assign(__assign({}, state), {\n          order: order\n        });\n      }\n\n    default:\n      return state;\n  }\n};\n\nexport var defaultSort = {\n  field: 'id',\n  order: 'DESC'\n};\n/**\r\n * Set the sort { field, order }\r\n * @name setSort\r\n * @function\r\n * @param {SortPayload} sort the sort object\r\n */\n\n/**\r\n * Set the sort field, swap the order if the field is the same\r\n * @name setSortField\r\n * @function\r\n * @param {string} field the sort field\r\n */\n\n/**\r\n * Set the sort order\r\n * @name setSortOrder\r\n * @function\r\n * @param {string} order The sort order, either ASC or DESC\r\n */\n\n/**\r\n * @typedef SortProps\r\n * @type {Object}\r\n * @property {Object} sort: the sort object.\r\n * @property {string} sort.field: the sort object.\r\n * @property {'ASC' | 'DESC'} sort.order: the sort object.\r\n * @property {setSort} setSort\r\n * @property {setSortField} setSortField\r\n * @property {setSortOrder} setSortOrder\r\n */\n\n/**\r\n * Hooks to provide sort state\r\n *\r\n * @example\r\n *\r\n * const { sort, setSort, setSortField, setSortOrder } = useSort({\r\n *      field: 'name',\r\n *      order: 'ASC',\r\n * });\r\n *\r\n * setSort({ field: 'name', order: 'ASC' });\r\n * // is the same as\r\n * setSortField('name');\r\n * setSortOrder('ASC');\r\n *\r\n * @param {Object} initialSort\r\n * @param {string} initialSort.field The initial sort field\r\n * @param {string} initialSort.order The initial sort order\r\n * @returns {SortProps} The sort props\r\n */\n\nvar useSortState = function useSortState(initialSort) {\n  if (initialSort === void 0) {\n    initialSort = defaultSort;\n  }\n\n  var _a = useReducer(sortReducer, initialSort),\n      sort = _a[0],\n      dispatch = _a[1];\n\n  var isFirstRender = useRef(true);\n  useEffect(function () {\n    if (isFirstRender.current) {\n      isFirstRender.current = false;\n      return;\n    }\n\n    dispatch({\n      type: 'SET_SORT',\n      payload: {\n        sort: initialSort\n      }\n    });\n  }, [initialSort.field, initialSort.order]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  return {\n    setSort: useCallback(function (sort) {\n      return dispatch({\n        type: 'SET_SORT',\n        payload: {\n          sort: sort\n        }\n      });\n    }, [dispatch]),\n    setSortField: useCallback(function (field) {\n      return dispatch({\n        type: 'SET_SORT_FIELD',\n        payload: {\n          field: field\n        }\n      });\n    }, [dispatch]),\n    setSortOrder: useCallback(function (order) {\n      return dispatch({\n        type: 'SET_SORT_ORDER',\n        payload: {\n          order: order\n        }\n      });\n    }, [dispatch]),\n    sort: sort\n  };\n};\n\nexport default useSortState;","map":null,"metadata":{},"sourceType":"module"}