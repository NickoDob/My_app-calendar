{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport set from 'lodash/set';\nimport removeEmpty from '../../../../util/removeEmpty';\nimport removeKey from '../../../../util/removeKey';\nexport var SET_SORT = 'SET_SORT';\nexport var SORT_ASC = 'ASC';\nexport var SORT_DESC = 'DESC';\nexport var SET_PAGE = 'SET_PAGE';\nexport var SET_PER_PAGE = 'SET_PER_PAGE';\nexport var SET_FILTER = 'SET_FILTER';\nexport var SHOW_FILTER = 'SHOW_FILTER';\nexport var HIDE_FILTER = 'HIDE_FILTER';\n\nvar oppositeOrder = function oppositeOrder(direction) {\n  return direction === SORT_DESC ? SORT_ASC : SORT_DESC;\n};\n/**\r\n * This reducer is for the react-router query string, NOT for redux.\r\n */\n\n\nvar queryReducer = function queryReducer(previousState, action) {\n  var _a;\n\n  switch (action.type) {\n    case SET_SORT:\n      if (action.payload.sort === previousState.sort) {\n        return __assign(__assign({}, previousState), {\n          order: oppositeOrder(previousState.order),\n          page: 1\n        });\n      }\n\n      return __assign(__assign({}, previousState), {\n        sort: action.payload.sort,\n        order: action.payload.order || SORT_ASC,\n        page: 1\n      });\n\n    case SET_PAGE:\n      return __assign(__assign({}, previousState), {\n        page: action.payload\n      });\n\n    case SET_PER_PAGE:\n      return __assign(__assign({}, previousState), {\n        page: 1,\n        perPage: action.payload\n      });\n\n    case SET_FILTER:\n      {\n        return __assign(__assign({}, previousState), {\n          page: 1,\n          filter: action.payload.filter,\n          displayedFilters: action.payload.displayedFilters ? action.payload.displayedFilters : previousState.displayedFilters\n        });\n      }\n\n    case SHOW_FILTER:\n      {\n        if (previousState.displayedFilters && previousState.displayedFilters[action.payload.filterName]) {\n          // the filter is already shown\n          return previousState;\n        }\n\n        return __assign(__assign({}, previousState), {\n          filter: typeof action.payload.defaultValue !== 'undefined' ? set(previousState.filter, action.payload.filterName, action.payload.defaultValue) : previousState.filter,\n          // we don't use lodash.set() for displayed filters\n          // to avoid problems with compound filter names (e.g. 'author.name')\n          displayedFilters: __assign(__assign({}, previousState.displayedFilters), (_a = {}, _a[action.payload.filterName] = true, _a))\n        });\n      }\n\n    case HIDE_FILTER:\n      {\n        return __assign(__assign({}, previousState), {\n          filter: removeEmpty(removeKey(previousState.filter, action.payload)),\n          // we don't use lodash.set() for displayed filters\n          // to avoid problems with compound filter names (e.g. 'author.name')\n          displayedFilters: previousState.displayedFilters ? Object.keys(previousState.displayedFilters).reduce(function (filters, filter) {\n            var _a;\n\n            return filter !== action.payload ? __assign(__assign({}, filters), (_a = {}, _a[filter] = true, _a)) : filters;\n          }, {}) : previousState.displayedFilters\n        });\n      }\n\n    default:\n      return previousState;\n  }\n};\n\nexport default queryReducer;","map":null,"metadata":{},"sourceType":"module"}