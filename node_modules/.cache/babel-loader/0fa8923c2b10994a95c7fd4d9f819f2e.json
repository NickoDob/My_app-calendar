{"ast":null,"code":"import { useCallback } from 'react';\nimport useMutation from './useMutation';\n/**\r\n * Get a callback to call the dataProvider.update() method, the result and the loading state.\r\n *\r\n * The return value updates according to the request state:\r\n *\r\n * - initial: [update, { loading: false, loaded: false }]\r\n * - start:   [update, { loading: true, loaded: false }]\r\n * - success: [update, { data: [data from response], loading: false, loaded: true }]\r\n * - error:   [update, { error: [error from response], loading: false, loaded: false }]\r\n *\r\n * @param resource The resource name, e.g. 'posts'\r\n * @param id The resource identifier, e.g. 123\r\n * @param data The updates to merge into the record, e.g. { views: 10 }\r\n * @param previousData The record before the update is applied\r\n * @param options Options object to pass to the dataProvider. May include side effects to be executed upon success or failure, e.g. { onSuccess: { refresh: true } }\r\n *\r\n * @returns The current request state. Destructure as [update, { data, error, loading, loaded }].\r\n *\r\n * The update() function can be called in 3 different ways:\r\n *  - with the same parameters as the useUpdate() hook: update(resource, id, data, previousData, options)\r\n *  - with the same syntax as useMutation: update({ resource, payload: { id, data, previousData } }, options)\r\n *  - with no parameter (if they were already passed to useUpdate()): update()\r\n *\r\n * @example // set params when calling the update callback\r\n *\r\n * import { useUpdate } from 'react-admin';\r\n *\r\n * const IncreaseLikeButton = ({ record }) => {\r\n *     const diff = { likes: record.likes + 1 };\r\n *     const [update, { loading, error }] = useUpdate();\r\n *     const handleClick = () => {\r\n *         update('likes', record.id, diff, record)\r\n *     }\r\n *     if (error) { return <p>ERROR</p>; }\r\n *     return <button disabled={loading} onClick={handleClick}>Like</div>;\r\n * };\r\n *\r\n * @example // set params when calling the hook\r\n *\r\n * import { useUpdate } from 'react-admin';\r\n *\r\n * const IncreaseLikeButton = ({ record }) => {\r\n *     const diff = { likes: record.likes + 1 };\r\n *     const [update, { loading, error }] = useUpdate('likes', record.id, diff, record);\r\n *     if (error) { return <p>ERROR</p>; }\r\n *     return <button disabled={loading} onClick={update}>Like</button>;\r\n * };\r\n *\r\n * @example // TypeScript\r\n * const [update, { data }] = useUpdate<Product>('products', id, changes, product);\r\n *                    \\-- data is Product\r\n */\n\nvar useUpdate = function useUpdate(resource, id, data, previousData, options) {\n  var _a = useMutation({\n    type: 'update',\n    resource: resource,\n    payload: {\n      id: id,\n      data: data,\n      previousData: previousData\n    }\n  }, options),\n      mutate = _a[0],\n      state = _a[1];\n\n  var update = useCallback(function (resource, id, data, previousData, options) {\n    if (typeof resource === 'string') {\n      var query = {\n        type: 'update',\n        resource: resource,\n        payload: {\n          id: id,\n          data: data,\n          previousData: previousData\n        }\n      };\n      return mutate(query, options);\n    } else {\n      return mutate(resource, id);\n    }\n  }, [mutate] // eslint-disable-line react-hooks/exhaustive-deps\n  );\n  return [update, state];\n};\n\nexport default useUpdate;","map":null,"metadata":{},"sourceType":"module"}