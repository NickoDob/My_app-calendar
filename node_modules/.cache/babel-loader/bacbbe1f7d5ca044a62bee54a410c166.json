{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport * as React from 'react';\nimport { useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport get from 'lodash/get';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useInput, FieldTitle, useTranslate, useChoices, warning } from 'ra-core';\nimport ResettableTextField from './ResettableTextField';\nimport InputHelperText from './InputHelperText';\nimport sanitizeInputRestProps from './sanitizeInputRestProps';\nimport Labeled from './Labeled';\nimport { LinearProgress } from '../layout';\nimport { useSupportCreateSuggestion } from './useSupportCreateSuggestion';\n/**\r\n * An Input component for a select box, using an array of objects for the options\r\n *\r\n * Pass possible options as an array of objects in the 'choices' attribute.\r\n *\r\n * By default, the options are built from:\r\n *  - the 'id' property as the option value,\r\n *  - the 'name' property as the option text\r\n * @example\r\n * const choices = [\r\n *    { id: 'M', name: 'Male' },\r\n *    { id: 'F', name: 'Female' },\r\n * ];\r\n * <SelectInput source=\"gender\" choices={choices} />\r\n *\r\n * You can also customize the properties to use for the option name and value,\r\n * thanks to the 'optionText' and 'optionValue' attributes.\r\n * @example\r\n * const choices = [\r\n *    { _id: 123, full_name: 'Leo Tolstoi', sex: 'M' },\r\n *    { _id: 456, full_name: 'Jane Austen', sex: 'F' },\r\n * ];\r\n * <SelectInput source=\"author_id\" choices={choices} optionText=\"full_name\" optionValue=\"_id\" />\r\n *\r\n * `optionText` also accepts a function, so you can shape the option text at will:\r\n * @example\r\n * const choices = [\r\n *    { id: 123, first_name: 'Leo', last_name: 'Tolstoi' },\r\n *    { id: 456, first_name: 'Jane', last_name: 'Austen' },\r\n * ];\r\n * const optionRenderer = choice => `${choice.first_name} ${choice.last_name}`;\r\n * <SelectInput source=\"author_id\" choices={choices} optionText={optionRenderer} />\r\n *\r\n * `optionText` also accepts a React Element, that will be cloned and receive\r\n * the related choice as the `record` prop. You can use Field components there.\r\n * @example\r\n * const choices = [\r\n *    { id: 123, first_name: 'Leo', last_name: 'Tolstoi' },\r\n *    { id: 456, first_name: 'Jane', last_name: 'Austen' },\r\n * ];\r\n * const FullNameField = ({ record }) => <span>{record.first_name} {record.last_name}</span>;\r\n * <SelectInput source=\"gender\" choices={choices} optionText={<FullNameField />}/>\r\n *\r\n * The choices are translated by default, so you can use translation identifiers as choices:\r\n * @example\r\n * const choices = [\r\n *    { id: 'M', name: 'myroot.gender.male' },\r\n *    { id: 'F', name: 'myroot.gender.female' },\r\n * ];\r\n *\r\n * However, in some cases (e.g. inside a `<ReferenceInput>`), you may not want\r\n * the choice to be translated. In that case, set the `translateChoice` prop to false.\r\n * @example\r\n * <SelectInput source=\"gender\" choices={choices} translateChoice={false}/>\r\n *\r\n * The object passed as `options` props is passed to the material-ui <Select> component\r\n *\r\n * You can disable some choices by providing a `disableValue` field which name is `disabled` by default\r\n * @example\r\n * const choices = [\r\n *    { id: 123, first_name: 'Leo', last_name: 'Tolstoi' },\r\n *    { id: 456, first_name: 'Jane', last_name: 'Austen' },\r\n *    { id: 976, first_name: 'William', last_name: 'Rinkerd', disabled: true },\r\n * ];\r\n *\r\n * @example\r\n * const choices = [\r\n *    { id: 123, first_name: 'Leo', last_name: 'Tolstoi' },\r\n *    { id: 456, first_name: 'Jane', last_name: 'Austen' },\r\n *    { id: 976, first_name: 'William', last_name: 'Rinkerd', not_available: true },\r\n * ];\r\n * <SelectInput source=\"gender\" choices={choices} disableValue=\"not_available\" />\r\n *\r\n */\n\nexport var SelectInput = function SelectInput(props) {\n  var allowEmpty = props.allowEmpty,\n      _a = props.choices,\n      choices = _a === void 0 ? [] : _a,\n      classesOverride = props.classes,\n      className = props.className,\n      create = props.create,\n      createLabel = props.createLabel,\n      createValue = props.createValue,\n      disableValue = props.disableValue,\n      emptyText = props.emptyText,\n      emptyValue = props.emptyValue,\n      format = props.format,\n      helperText = props.helperText,\n      label = props.label,\n      loaded = props.loaded,\n      loading = props.loading,\n      _b = props.margin,\n      margin = _b === void 0 ? 'dense' : _b,\n      onBlur = props.onBlur,\n      onChange = props.onChange,\n      onCreate = props.onCreate,\n      onFocus = props.onFocus,\n      options = props.options,\n      optionText = props.optionText,\n      optionValue = props.optionValue,\n      parse = props.parse,\n      resource = props.resource,\n      source = props.source,\n      translateChoice = props.translateChoice,\n      validate = props.validate,\n      rest = __rest(props, [\"allowEmpty\", \"choices\", \"classes\", \"className\", \"create\", \"createLabel\", \"createValue\", \"disableValue\", \"emptyText\", \"emptyValue\", \"format\", \"helperText\", \"label\", \"loaded\", \"loading\", \"margin\", \"onBlur\", \"onChange\", \"onCreate\", \"onFocus\", \"options\", \"optionText\", \"optionValue\", \"parse\", \"resource\", \"source\", \"translateChoice\", \"validate\"]);\n\n  var translate = useTranslate();\n  var classes = useStyles(props);\n  warning(source === undefined, \"If you're not wrapping the SelectInput inside a ReferenceInput, you must provide the source prop\");\n  warning(choices === undefined, \"If you're not wrapping the SelectInput inside a ReferenceInput, you must provide the choices prop\");\n\n  var _c = useChoices({\n    optionText: optionText,\n    optionValue: optionValue,\n    translateChoice: translateChoice\n  }),\n      getChoiceText = _c.getChoiceText,\n      getChoiceValue = _c.getChoiceValue;\n\n  var _d = useInput(__assign({\n    format: format,\n    onBlur: onBlur,\n    onChange: onChange,\n    onFocus: onFocus,\n    parse: parse,\n    resource: resource,\n    source: source,\n    validate: validate\n  }, rest)),\n      id = _d.id,\n      input = _d.input,\n      isRequired = _d.isRequired,\n      meta = _d.meta;\n\n  var touched = meta.touched,\n      error = meta.error,\n      submitError = meta.submitError;\n  var renderEmptyItemOption = useCallback(function () {\n    return React.isValidElement(emptyText) ? React.cloneElement(emptyText) : emptyText === '' ? ' ' // em space, forces the display of an empty line of normal height\n    : translate(emptyText, {\n      _: emptyText\n    });\n  }, [emptyText, translate]);\n  var renderMenuItemOption = useCallback(function (choice) {\n    return getChoiceText(choice);\n  }, [getChoiceText]);\n  var handleChange = useCallback(function (event, newItem) {\n    return __awaiter(void 0, void 0, void 0, function () {\n      var value;\n      return __generator(this, function (_a) {\n        if (newItem) {\n          value = getChoiceValue(newItem);\n          input.onChange(value);\n          return [2\n          /*return*/\n          ];\n        }\n\n        input.onChange(event);\n        return [2\n        /*return*/\n        ];\n      });\n    });\n  }, [input, getChoiceValue]);\n\n  var _e = useSupportCreateSuggestion({\n    create: create,\n    createLabel: createLabel,\n    createValue: createValue,\n    handleChange: handleChange,\n    onCreate: onCreate\n  }),\n      getCreateItem = _e.getCreateItem,\n      handleChangeWithCreateSupport = _e.handleChange,\n      createElement = _e.createElement;\n\n  if (loading) {\n    return React.createElement(Labeled, {\n      id: id,\n      label: label,\n      source: source,\n      resource: resource,\n      className: className,\n      isRequired: isRequired,\n      meta: meta,\n      input: input,\n      margin: margin\n    }, React.createElement(LinearProgress, null));\n  }\n\n  var createItem = getCreateItem();\n  return React.createElement(React.Fragment, null, React.createElement(ResettableTextField, __assign({\n    id: id\n  }, input, {\n    onChange: handleChangeWithCreateSupport,\n    select: true,\n    label: label !== '' && label !== false && React.createElement(FieldTitle, {\n      label: label,\n      source: source,\n      resource: resource,\n      isRequired: isRequired\n    }),\n    className: classes.input + \" \" + className,\n    clearAlwaysVisible: true,\n    error: !!(touched && (error || submitError)),\n    helperText: React.createElement(InputHelperText, {\n      touched: touched,\n      error: error || submitError,\n      helperText: helperText\n    }),\n    margin: margin\n  }, options, sanitizeRestProps(rest)), allowEmpty ? React.createElement(MenuItem, {\n    value: emptyValue,\n    key: \"null\",\n    \"aria-label\": translate('ra.action.clear_input_value'),\n    title: translate('ra.action.clear_input_value')\n  }, renderEmptyItemOption()) : null, choices.map(function (choice) {\n    return React.createElement(MenuItem, {\n      key: getChoiceValue(choice),\n      value: getChoiceValue(choice),\n      disabled: get(choice, disableValue)\n    }, renderMenuItemOption(choice));\n  }), onCreate || create ? React.createElement(MenuItem, {\n    value: createItem.id,\n    key: createItem.id\n  }, createItem.name) : null), createElement);\n};\nSelectInput.propTypes = {\n  allowEmpty: PropTypes.bool,\n  emptyText: PropTypes.oneOfType([PropTypes.string, PropTypes.element]),\n  emptyValue: PropTypes.any,\n  choices: PropTypes.arrayOf(PropTypes.object),\n  classes: PropTypes.object,\n  className: PropTypes.string,\n  label: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n  options: PropTypes.object,\n  optionText: PropTypes.oneOfType([PropTypes.string, PropTypes.func, PropTypes.element]).isRequired,\n  optionValue: PropTypes.string.isRequired,\n  disableValue: PropTypes.string,\n  resettable: PropTypes.bool,\n  resource: PropTypes.string,\n  source: PropTypes.string,\n  translateChoice: PropTypes.bool\n};\nSelectInput.defaultProps = {\n  emptyText: '',\n  emptyValue: '',\n  options: {},\n  optionText: 'name',\n  optionValue: 'id',\n  translateChoice: true,\n  disableValue: 'disabled'\n};\n\nvar sanitizeRestProps = function sanitizeRestProps(_a) {\n  var addLabel = _a.addLabel,\n      afterSubmit = _a.afterSubmit,\n      allowNull = _a.allowNull,\n      beforeSubmit = _a.beforeSubmit,\n      choices = _a.choices,\n      className = _a.className,\n      crudGetMatching = _a.crudGetMatching,\n      crudGetOne = _a.crudGetOne,\n      data = _a.data,\n      filter = _a.filter,\n      filterToQuery = _a.filterToQuery,\n      formatOnBlur = _a.formatOnBlur,\n      isEqual = _a.isEqual,\n      limitChoicesToValue = _a.limitChoicesToValue,\n      multiple = _a.multiple,\n      name = _a.name,\n      pagination = _a.pagination,\n      perPage = _a.perPage,\n      ref = _a.ref,\n      reference = _a.reference,\n      refetch = _a.refetch,\n      render = _a.render,\n      setFilter = _a.setFilter,\n      setPagination = _a.setPagination,\n      setSort = _a.setSort,\n      sort = _a.sort,\n      subscription = _a.subscription,\n      type = _a.type,\n      validateFields = _a.validateFields,\n      validation = _a.validation,\n      value = _a.value,\n      rest = __rest(_a, [\"addLabel\", \"afterSubmit\", \"allowNull\", \"beforeSubmit\", \"choices\", \"className\", \"crudGetMatching\", \"crudGetOne\", \"data\", \"filter\", \"filterToQuery\", \"formatOnBlur\", \"isEqual\", \"limitChoicesToValue\", \"multiple\", \"name\", \"pagination\", \"perPage\", \"ref\", \"reference\", \"refetch\", \"render\", \"setFilter\", \"setPagination\", \"setSort\", \"sort\", \"subscription\", \"type\", \"validateFields\", \"validation\", \"value\"]);\n\n  return sanitizeInputRestProps(rest);\n};\n\nvar useStyles = makeStyles(function (theme) {\n  return {\n    input: {\n      minWidth: theme.spacing(20)\n    }\n  };\n}, {\n  name: 'RaSelectInput'\n});","map":null,"metadata":{},"sourceType":"module"}