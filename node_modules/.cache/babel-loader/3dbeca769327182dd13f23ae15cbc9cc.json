{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport * as React from 'react';\nimport { memo, isValidElement } from 'react';\nimport { IconButton, ListItem, ListItemText, ListItemSecondaryAction } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport CancelIcon from '@material-ui/icons/CancelOutlined';\nimport { useTranslate, useListFilterContext } from 'ra-core';\nimport { shallowEqual } from 'react-redux';\nimport matches from 'lodash/matches';\nimport pickBy from 'lodash/pickBy';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    listItem: {\n      paddingLeft: '2em'\n    },\n    listItemText: {\n      margin: 0\n    }\n  };\n});\n/**\r\n * Button to enable/disable a list filter.\r\n *\r\n * Expects 2 props:\r\n *\r\n * - label: The text (or React element) to be displayed for this item.\r\n *   If it's a string, the component will translate it.\r\n * - value: An object to be merged into the filter value when enabling the filter\r\n *   (e.g. { is_published: true, published_at_gte: '2020-07-08' })\r\n *\r\n * @example\r\n *\r\n * import * as React from 'react';\r\n * import { Card, CardContent } from '@material-ui/core';\r\n * import MailIcon from '@material-ui/icons/MailOutline';\r\n * import { FilterList, FilterListItem } from 'react-admin';\r\n *\r\n * const FilterSidebar = () => (\r\n *     <Card>\r\n *         <CardContent>\r\n *             <FilterList\r\n *                 label=\"Subscribed to newsletter\"\r\n *                 icon={<MailIcon />}\r\n *             >\r\n *                 <FilterListItem\r\n *                     label=\"Yes\"\r\n *                     value={{ has_newsletter: true }}\r\n *                  />\r\n *                 <FilterListItem\r\n *                     label=\"No\"\r\n *                     value={{ has_newsletter: false }}\r\n *                  />\r\n *             </FilterList>\r\n *         </CardContent>\r\n *     </Card>\r\n * );\r\n *\r\n * @example // The value prop can contain multiple keys\r\n *\r\n * import * as React from 'react';\r\n * import {\r\n *     endOfYesterday,\r\n *     startOfWeek,\r\n *     subWeeks,\r\n *     startOfMonth,\r\n *     subMonths,\r\n * } from 'date-fns';\r\n * import { Card, CardContent } from '@material-ui/core';\r\n * import AccessTimeIcon from '@material-ui/icons/AccessTime';\r\n * import { FilterList, FilterListItem } from 'react-admin';\r\n *\r\n * const FilterSidebar = () => (\r\n *     <Card>\r\n *         <CardContent>\r\n *             <FilterList\r\n *                 label=\"Last visited\"\r\n *                 icon={<AccessTimeIcon />}\r\n *             >\r\n *                 <FilterListItem\r\n *                     label=\"Today\"\r\n *                     value={{\r\n *                         last_seen_gte: endOfYesterday().toISOString(),\r\n *                         last_seen_lte: undefined,\r\n *                     }}\r\n *                 />\r\n *                 <FilterListItem\r\n *                     label=\"This week\"\r\n *                     value={{\r\n *                         last_seen_gte: startOfWeek(\r\n *                             new Date()\r\n *                         ).toISOString(),\r\n *                         last_seen_lte: undefined,\r\n *                     }}\r\n *                 />\r\n *                 <FilterListItem\r\n *                     label=\"Last week\"\r\n *                     value={{\r\n *                         last_seen_gte: subWeeks(\r\n *                             startOfWeek(new Date()),\r\n *                             1\r\n *                         ).toISOString(),\r\n *                         last_seen_lte: startOfWeek(\r\n *                             new Date()\r\n *                         ).toISOString(),\r\n *                     }}\r\n *                 />\r\n *                 <FilterListItem\r\n *                     label=\"This month\"\r\n *                     value={{\r\n *                         last_seen_gte: startOfMonth(\r\n *                             new Date()\r\n *                         ).toISOString(),\r\n *                         last_seen_lte: undefined,\r\n *                     }}\r\n *                 />\r\n *                 <FilterListItem\r\n *                     label=\"Last month\"\r\n *                     value={{\r\n *                         last_seen_gte: subMonths(\r\n *                             startOfMonth(new Date()),\r\n *                             1\r\n *                         ).toISOString(),\r\n *                         last_seen_lte: startOfMonth(\r\n *                             new Date()\r\n *                         ).toISOString(),\r\n *                     }}\r\n *                 />\r\n *                 <FilterListItem\r\n *                     label=\"Earlier\"\r\n *                     value={{\r\n *                         last_seen_gte: undefined,\r\n *                         last_seen_lte: subMonths(\r\n *                             startOfMonth(new Date()),\r\n *                             1\r\n *                         ).toISOString(),\r\n *                     }}\r\n *                 />\r\n *             </FilterList>\r\n *         </CardContent>\r\n *     </Card>\r\n * );\r\n */\n\nvar FilterListItem = function FilterListItem(props) {\n  var label = props.label,\n      value = props.value;\n\n  var _a = useListFilterContext(),\n      filterValues = _a.filterValues,\n      setFilters = _a.setFilters;\n\n  var translate = useTranslate();\n  var classes = useStyles(props);\n  var isSelected = matches(pickBy(value, function (val) {\n    return typeof val !== 'undefined';\n  }))(filterValues);\n\n  var addFilter = function addFilter() {\n    setFilters(__assign(__assign({}, filterValues), value), null, false);\n  };\n\n  var removeFilter = function removeFilter() {\n    var keysToRemove = Object.keys(value);\n    var filters = Object.keys(filterValues).reduce(function (acc, key) {\n      var _a;\n\n      return keysToRemove.includes(key) ? acc : __assign(__assign({}, acc), (_a = {}, _a[key] = filterValues[key], _a));\n    }, {});\n    setFilters(filters, null, false);\n  };\n\n  var toggleFilter = function toggleFilter() {\n    return isSelected ? removeFilter() : addFilter();\n  };\n\n  return React.createElement(ListItem, {\n    button: true,\n    onClick: toggleFilter,\n    selected: isSelected,\n    className: classes.listItem\n  }, React.createElement(ListItemText, {\n    primary: isValidElement(label) ? label : translate(label, {\n      _: label\n    }),\n    className: classes.listItemText,\n    \"data-selected\": isSelected ? 'true' : 'false'\n  }), isSelected && React.createElement(ListItemSecondaryAction, null, React.createElement(IconButton, {\n    size: \"small\",\n    onClick: toggleFilter\n  }, React.createElement(CancelIcon, null))));\n};\n\nvar arePropsEqual = function arePropsEqual(prevProps, nextProps) {\n  return prevProps.label === nextProps.label && shallowEqual(prevProps.value, nextProps.value);\n};\n\nexport default memo(FilterListItem, arePropsEqual);","map":null,"metadata":{},"sourceType":"module"}